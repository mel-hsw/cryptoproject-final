# Data Drift Summary

## Overview

This document tracks data drift detection reports generated by Evidently AI. Data drift indicates when the distribution of incoming features differs significantly from the training data, which can degrade model performance.

## Drift Detection Schedule

### Automated Reports

**Frequency:** Weekly (every Monday at 2 AM UTC)

**Command:**
```bash
python scripts/generate_evidently_report.py \
  --features data/processed/features_replay.parquet \
  --output reports/evidently/train_test_drift_report.html \
  --report_type train_test
```

**Location:** `reports/evidently/train_test_drift_report.html`

### Manual Reports

Generate on-demand for:
- After major data collection sessions
- Before model retraining
- When performance degrades unexpectedly

**Command:**
```bash
python scripts/generate_evidently_report.py \
  --features data/processed/features_replay.parquet \
  --output reports/evidently/data_drift_report.html \
  --report_type data_drift
```

## Drift Thresholds

### Feature-Level Drift

- **Low Drift:** p-value > 0.05 (no significant drift detected)
- **Medium Drift:** 0.01 < p-value ≤ 0.05 (moderate drift, monitor closely)
- **High Drift:** p-value ≤ 0.01 (significant drift, consider retraining)

### Dataset-Level Drift

- **Drift Detected:** When > 50% of features show drift
- **Action Required:** When > 75% of features show drift

## Recent Drift Reports

### 2025-11-24 - Train/Test Drift Analysis

**Report:** `reports/evidently/train_test_drift_report.html`

**Summary:**
- **Features Analyzed:** 10 (top features from Random Forest)
- **Drift Status:** [To be filled after report generation]
- **Key Findings:**
  - [To be filled]
  - [To be filled]

**Actions Taken:**
- [To be filled]

### [Previous Reports]

[Add previous drift reports here]

## Drift Response Procedure

### When Drift is Detected

1. **Review Report:** Open HTML report and identify drifted features
2. **Assess Impact:** Check model performance metrics (PR-AUC, accuracy)
3. **Investigate Root Cause:**
   - Market conditions changed?
   - Data collection issues?
   - Feature computation bugs?
4. **Take Action:**
   - **Low Drift:** Continue monitoring
   - **Medium Drift:** Schedule retraining within 2 weeks
   - **High Drift:** Immediate retraining or model rollback

### Model Retraining Trigger

Retrain model when:
- > 75% of features show drift
- Model performance (PR-AUC) drops > 5%
- Drift persists for > 2 weeks

## Monitoring Features

The following 10 features are monitored for drift (top features from Random Forest):

1. `log_return_300s`
2. `spread_mean_300s`
3. `trade_intensity_300s`
4. `order_book_imbalance_300s`
5. `spread_mean_60s`
6. `order_book_imbalance_60s`
7. `price_velocity_300s`
8. `realized_volatility_300s`
9. `order_book_imbalance_30s`
10. `realized_volatility_60s`

## Automation (Future)

Consider automating drift detection:
- **Cron Job:** Weekly report generation
- **Alerting:** Email/Slack notification on high drift
- **Integration:** Trigger retraining pipeline on drift detection

---

**Last Updated:** November 2025  
**Next Report:** [To be scheduled]

