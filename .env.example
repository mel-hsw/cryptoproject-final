# =============================================================================
# Crypto Volatility Detection - Environment Configuration
# =============================================================================
# Copy this file to .env and customize for your local environment
# DO NOT commit .env to version control (it's already in .gitignore)
#
# Usage:
#   1. Copy: cp .env.example .env
#   2. Edit .env with your local settings
#   3. Docker Compose will automatically load .env when you run services
# =============================================================================

# -----------------------------------------------------------------------------
# Kafka Configuration
# -----------------------------------------------------------------------------
# Kafka broker connection settings for all services
KAFKA_BOOTSTRAP_SERVERS=kafka:29092

# Kafka topics for data pipeline
KAFKA_TOPIC_RAW=ticks.raw
KAFKA_TOPIC_FEATURES=ticks.features
KAFKA_TOPIC_PREDICTIONS=predictions.log

# Kafka consumer settings (for monitoring and prediction consumer)
KAFKA_CONSUMER_TIMEOUT_MS=30000
KAFKA_MAX_MESSAGES=50000

# -----------------------------------------------------------------------------
# MLflow Configuration
# -----------------------------------------------------------------------------
# MLflow tracking server URI for model versioning and experiment tracking
MLFLOW_TRACKING_URI=http://mlflow:5000
MLFLOW_EXPERIMENT=crypto-volatility-production

# -----------------------------------------------------------------------------
# Model Configuration
# -----------------------------------------------------------------------------
# Model variant selection: 'ml' (trained model) or 'baseline' (z-score fallback)
MODEL_VARIANT=ml

# Model version to use (when MODEL_VARIANT=ml)
# Options: random_forest, logistic_regression, gradient_boosting, etc.
MODEL_VERSION=random_forest

# Model paths (typically don't need to change these)
MODEL_PATH=/app/models/artifacts/${MODEL_VERSION}/model.pkl
BASELINE_MODEL_PATH=/app/models/artifacts/baseline/model.pkl

# -----------------------------------------------------------------------------
# Coinbase WebSocket Configuration
# -----------------------------------------------------------------------------
# WebSocket URL for Coinbase Advanced Trade API (public data - no API key needed)
COINBASE_WS_URL=wss://advanced-trade-ws.coinbase.com

# Trading pairs to monitor (comma-separated for multiple pairs)
TRADING_PAIRS=BTC-USD,ETH-USD

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
# Logging level for all services
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Featurizer metrics port (Prometheus)
FEATURIZER_METRICS_PORT=8001

# -----------------------------------------------------------------------------
# Prometheus Configuration
# -----------------------------------------------------------------------------
# Scrape interval for metrics collection (in seconds)
SCRAPE_INTERVAL=15s

# API metrics scrape interval (in seconds)
API_SCRAPE_INTERVAL=5s

# -----------------------------------------------------------------------------
# Grafana Configuration
# -----------------------------------------------------------------------------
# Grafana database connection settings
GF_DATABASE_MAX_IDLE_CONN=2
GF_DATABASE_MAX_OPEN_CONN=0
GF_DATABASE_CONN_MAX_LIFETIME=14400

# -----------------------------------------------------------------------------
# Kafka Internal Configuration (Advanced - typically don't change)
# -----------------------------------------------------------------------------
# These are used by the Kafka broker itself (docker/compose.yaml)
KAFKA_NODE_ID=1
KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR=1
KAFKA_TRANSACTION_STATE_LOG_REPLICATION_FACTOR=1
KAFKA_TRANSACTION_STATE_LOG_MIN_ISR=1

# -----------------------------------------------------------------------------
# Development/Testing Overrides
# -----------------------------------------------------------------------------
# Uncomment and customize these for local development

# For local testing outside Docker, use localhost instead of service names
# KAFKA_BOOTSTRAP_SERVERS=localhost:9092
# MLFLOW_TRACKING_URI=http://localhost:5000

# For testing with different scrape intervals
# SCRAPE_INTERVAL=5s

# For verbose debugging
# LOG_LEVEL=DEBUG

# -----------------------------------------------------------------------------
# Security Notes
# -----------------------------------------------------------------------------
# - This project uses Coinbase's public market data API (no API keys required)
# - If you add authentication or API keys in the future, NEVER commit them to git
# - Always use .env for secrets and ensure .env is in .gitignore
# - For production deployments, use secret management services (AWS Secrets Manager, etc.)
# -----------------------------------------------------------------------------
